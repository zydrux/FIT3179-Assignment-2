{
  "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
  "width": 500,
  "height": 400,
  "description": "A bubbleplot showing horsepower on x, miles per gallons on y, and binned acceleration on size.",
  "data": {"url": "https://raw.githubusercontent.com/zydrux/FIT3179-Assignment-2/main/testing2.csv", "format":{ "type": "csv"}},
  "params": [
    {
      "name": "max_percentage",
      "value": 100,
      "bind": {
        "input": "range",
        "min": 0,
        "max": 100,
        "step": 1,
        "name": "Under 5 Deaths"
      }
    },
    {
      "name": "continent_selection",
      "bind": {
        "input": "select",
        "labels": [
          "Show All",
          "North America",
          "South America",
          "Europe",
          "Africa",
          "Asia",
          "Oceania"
        ],
        "options": [
          null,
          "North America",
          "South America",
          "Europe",
          "Africa",
          "Asia",
          "Oceania"
        ],
        "name": "Select Continent"
      }
    }
  ],
  "transform": [
    {"filter": "datum.Continent == continent_selection || continent_selection == null"},
    {"filter": "datum.underfivedeaths <= max_percentage"}
  ], 
  "hconcat":[{
  "mark": "circle",
  "encoding": {
    "y": {"field": "Total-expenditure", "type": "quantitative", "scale":{"domain":[1,20]}, "axis":{"tickCount": 10}},
    "x": {"field": "Diphtheria", "type": "quantitative", "axis": {"tickCount":20}},
    "size": {"field": "underfivedeaths", "type": "quantitative", "title": "Under 5 Deaths"},
    "tooltip":[{"field": "Country", "type": "nominal"},{"field": "Diphtheria", "type": "quantitative", "title": "% Immunized"},{"field": "underfivedeaths", "type": "quantitative"}],
    "opacity": {"value": 0.3}
  }},
  {
  "mark": {"type":"circle","color": "red"},
  "encoding": {
    "y": {"field": "Total-expenditure", "type": "quantitative", "scale":{"domain":[1,20]}, "axis":{"tickCount": 10}},
    "x": {"field": "Polio", "type": "quantitative", "axis": {"tickCount":20}},
    "size": {"field": "underfivedeaths", "type": "quantitative", "title": "Under 5 Deaths"},
    "tooltip":[{"field": "Country", "type": "nominal"},{"field": "Diphtheria", "type": "quantitative", "title": "% Immunized"},{"field": "underfivedeaths", "type": "quantitative"}],
    "config":{"fill": "#ffbf00"},
    "opacity": {"value": 0.3}
  }},
  {
  "mark": {"type":"circle","color": "green"},
  "encoding": {
    "y": {"field": "Total-expenditure", "type": "quantitative", "scale":{"domain":[1,20]}, "axis":{"tickCount": 10}},
    "x": {"field": "Hepatitis-B", "type": "quantitative", "axis": {"tickCount":20}},
    "size": {"field": "underfivedeaths", "type": "quantitative", "title": "Under 5 Deaths"},
    "tooltip":[{"field": "Country", "type": "nominal"},{"field": "Diphtheria", "type": "quantitative", "title": "% Immunized"},{"field": "underfivedeaths", "type": "quantitative"}],
    "opacity": {"value": 0.3}
  }}],
  "resolve": {"scale": {"color": "independent"}}
}
